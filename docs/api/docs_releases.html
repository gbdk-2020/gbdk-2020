<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="cache-control" content="max-age=86400"/>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GBDK 2020 Docs: GBDK Release Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GBDK 2020 Docs
   &#160;<span id="projectnumber">4.3.0</span>
   </div>
   <div id="projectbrief">API Documentation for GBDK 2020</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('docs_releases.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">GBDK Release Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The GBDK-2020 releases can be found on Github: <a href="https://github.com/gbdk-2020/gbdk-2020/releases">https://github.com/gbdk-2020/gbdk-2020/releases</a></p>
<h1><a class="anchor" id="autotoc_md243"></a>
GBDK-2020 Release Notes</h1>
<h2><a class="anchor" id="autotoc_md244"></a>
GBDK-2020 4.3.0</h2>
<p>~2024/05</p><ul>
<li>Includes SDCC version ~4.4.0 (14650) with GBDK-2020 patches for Z80 and NES<ul>
<li><a href="https://github.com/gbdk-2020/gbdk-2020-sdcc/releases">Patched SDCC Builds</a> with support for Sega GG/SMS and the Nintendo NES are used.</li>
<li>See the <a href="https://github.com/gbdk-2020/gbdk-2020-sdcc/tree/main/.github/workflows">github workflow</a> for details.</li>
</ul>
</li>
<li>Added native GBDK build for Apple ARM cpus</li>
<li>Known Issues<ul>
<li>SDCC may fail on Windows when <a class="el" href="docs_getting_started.html#windows_sdcc_non_c_drive_path_spaces">run from folder names with spaces on non-C drives</a>.</li>
</ul>
</li>
<li>Library<ul>
<li>Added <a class="el" href="gb_8h.html#a4093fb5f45f807fe8d4a45121f3fffc5">get_system()</a> which indicates system speed<ul>
<li><a class="el" href="sms_8h.html#a99bca2df4c6fde16a659797b4e584036">SYSTEM_60HZ</a>, <a class="el" href="sms_8h.html#ad6329c19927cf02579e2503e40c0bbde">SYSTEM_50HZ</a>, <a class="el" href="nes_8h.html#aa370f208d677a232346ddf00a8ef7243">SYSTEM_BITS_DENDY</a>, <a class="el" href="nes_8h.html#a1e73068b3ffdb8436eaa3362f104ba74">SYSTEM_BITS_NTSC</a>, <a class="el" href="nes_8h.html#a599f3df346be94f25498749e2442bde8">SYSTEM_BITS_PAL</a>, <a class="el" href="msx_2hardware_8h.html#ae6888157a94fca2f1a1b5136494f2e07">SYSTEM_NTSC</a></li>
</ul>
</li>
<li>Changed to new calling convention for <a class="el" href="stdio_8h.html#a133c04c35a1c14c6f8d8078831705661">printf()</a>, <a class="el" href="stdio_8h.html#a440c82287022737c4f2866786ba8a154">sprintf()</a>, <a class="el" href="stdlib_8h.html#af15d7205d8d10c4820f997ce5c526279">abs()</a></li>
<li>Changed <a class="el" href="gbdk_2emu__debug_8h.html#a910b2802e154473f2e10201f5722bc10">EMU_printf()</a> to remove dependency on stdio.h added similar <a class="el" href="gbdk_2emu__debug_8h.html#a322fb0f357e31e5f275d6c1b2c71d1e7">EMU_fmtbuf()</a></li>
<li>Fixed <a class="el" href="gbdk_2emu__debug_8h.html">emu_debug.h</a> macros missing a trailing space</li>
<li>NES<ul>
<li>Added PAL support (detects NTSC/PAL/Dendy on reset to adjust fake LCD ISR timings)</li>
<li>Added BCD support</li>
<li>Added deferred hblank system for fake LCD ISRs, allowing for multiple splits per-frame</li>
<li>NMI optimization: Only call delay routine for remaining-vblank and LCD handler execution if LCD handler present</li>
<li>NMI optimization: Skip OAM DMA and delay routines when display is off, to increase unbuffered performance</li>
<li>NMI optimization: Save 8 cycles of stripe setup cost in vram transfer buffer execution</li>
<li>ZP memory optimization: Make gbdk-nes functions use its own dedicated overlay segment</li>
<li>Fixed <code>_map_tile_offset</code> not being applied for <a class="el" href="gb_8h.html#a811c386cac0df2d260aacb5a43608be5">set_bkg_based_tiles()</a></li>
<li>Fixed VRAM transfer buffer bug (ensure stack page cleared on reset)</li>
<li>Fixed support for 4-player controllers using fourscore</li>
<li>Fixed <a class="el" href="msx_8h.html#a7d5ed1aed79d8fd2894893d7f6f9b835">set_sprite_palette()</a> to index from <code>0..3</code> instead of <code>4..7</code></li>
<li>Fixed __move_metasprite to initialize Y index register to zero</li>
<li>Fixed <a class="el" href="sms_8h.html#aebc8751fa428e9845ea25b1060ebe772">waitpadup</a> to wait for button release instead of press</li>
<li>Updated libc to latest from sdcc 4.4.0</li>
</ul>
</li>
<li>SMS/GG<ul>
<li>Added <a class="el" href="sms_8h.html#a495bc9f405f916f02ad5d97e6e730134">SHOW_SPRITES</a>, <a class="el" href="sms_8h.html#a69ef98aee664b8abd8d1a3d45f016dda">HIDE_SPRITES</a> (no hiding mid-frame)</li>
<li>Added <a class="el" href="sms_8h.html#a33caf10f6d1a7cbb6bd07b899c1a545f">S_BANK</a> tile attribute</li>
<li>Added 6 button controller support in <a class="el" href="gb_8h.html#a4344fefd260763e12703138066841b19">joypad()</a></li>
<li>Added BCD support</li>
<li>Added ability to move VDP SAT and name table to other locations by writing to VDP R2 and VDP R5.<ul>
<li>Set name table to 0x1800 and SAT to 0x1F00 by default to free up some sprite tile space</li>
<li>Added R5_SAT_0x1F00 definition for the R5 value controlling SAT position in VRAM</li>
</ul>
</li>
<li>Added <a class="el" href="msx_8h.html#a63369a199a979eb3dbba71449659148d">__WRITE_VDP_REG_UNSAFE()</a> VDP macro while interrupts are disabled (such as in ISR handlers)</li>
<li>Added Game Gear registers and definitions<ul>
<li><code>GG_STATE</code>: <a class="el" href="sms_2hardware_8h.html#ac47372b55b9220014f56cd5d82ad4f6a">GGSTATE_STT</a>, <a class="el" href="sms_2hardware_8h.html#afbcd35f381a5a019f0ba68c125a3b0b6">GGSTATE_NJAP</a>, <a class="el" href="sms_2hardware_8h.html#a57ce09982f2d20989540a1c4f207f992">GGSTATE_NNTS</a></li>
<li><code>GG_EXT_7BIT</code></li>
<li><code>GG_EXT_CTL</code>: <a class="el" href="sms_2hardware_8h.html#ad68641fd6be1f4032c688dcdf9c0ff5e">GGEXT_NINIT</a></li>
<li><code>GG_SIO_SEND</code></li>
<li><code>GG_SIO_RECV</code></li>
<li><code>GG_SIO_CTL</code>: <a class="el" href="sms_2hardware_8h.html#a48bb341314dd449f124e5a9a91767cc2">SIOCTL_TXFL</a>, <a class="el" href="sms_2hardware_8h.html#a2f356619237cafd166d4399d8fca63d8">SIOCTL_RXRD</a>, <a class="el" href="sms_2hardware_8h.html#ae27ff078ad5f80282990bfb1cf5e1d32">SIOCTL_FRER</a>, <a class="el" href="sms_2hardware_8h.html#af6b2cc143f1d9fab08b2d3bdef0e2f1c">SIOCTL_INT</a>, <a class="el" href="sms_2hardware_8h.html#a81b3ebb1ebbac6306433abe460ef51c5">SIOCTL_TON</a>, <a class="el" href="sms_2hardware_8h.html#af89fbd7f16c6bff2f901c7c25e575d21">SIOCTL_RON</a>, <a class="el" href="sms_2hardware_8h.html#af18f1262a706e3c6d105afbca4834ce9">SIOCTL_BS0</a>, <a class="el" href="sms_2hardware_8h.html#a84c7c86e1754d8a7286359d01bab97ad">SIOCTL_BS1</a></li>
<li><code>GG_SOUND_PAN</code>: <a class="el" href="sms_2hardware_8h.html#a8a4901a3e61f815a324b37e7b6f32671">SOUNDPAN_TN1R</a>, <a class="el" href="sms_2hardware_8h.html#aacc641896defa2bf9881929494034e8a">SOUNDPAN_TN2R</a>, <a class="el" href="sms_2hardware_8h.html#a81a154f1bd5456a4e489e96c5a4e2990">SOUNDPAN_TN3R</a>, <a class="el" href="sms_2hardware_8h.html#a4de80c85263c705ad0df9e9c92c0b2df">SOUNDPAN_NOSR</a>, <a class="el" href="sms_2hardware_8h.html#aaa16ce1f58e3ffe5937d721a8c22cdc7">SOUNDPAN_TN1L</a>, <a class="el" href="sms_2hardware_8h.html#a2dd3ef5009c788164624e6fa3545a2a4">SOUNDPAN_TN2L</a>, <a class="el" href="sms_2hardware_8h.html#a0236f56bdd69aa9a2321b635d586002e">SOUNDPAN_TN3L</a>, <a class="el" href="sms_2hardware_8h.html#a45b27027ec712d80c1a4c3e0deb548c3">SOUNDPAN_NOSL</a></li>
</ul>
</li>
<li>Optimized native tile data loading routines</li>
<li>Improved VDP_WRITE_DATA macro so it does not need <code>di</code>/<code>ei</code> protection</li>
<li>Improved palette initialization in crt0</li>
<li>Fixed tilemap wrapping over the low bound of the VDP name table</li>
<li>Fixed <a class="el" href="gb_8h.html#a6c59aa9a4f9ea42bed6ca6940b2741fe">scroll_sprite()</a></li>
<li>Fixed missing sms.h in sms/metasprites.h</li>
<li>Fixed scroll glitch due to accessing VDP too fast</li>
</ul>
</li>
<li>Z80 shared SMS/GG/MSX<ul>
<li>Added <a class="el" href="gb_2hardware_8h.html#afa1e18e47bf68ce68d7807fff6edf16b">DIV_REG</a> emulation for the Z80 systems, may be useful for seeding RNG</li>
<li>Changed VDP to reduce chances of dangerous ISR nesting (see SDCC issue <a href="https://sourceforge.net/p/sdcc/bugs/3721/">https://sourceforge.net/p/sdcc/bugs/3721/</a>)</li>
<li>Changed to allow nested locking of the shadow SAT copying on VBlank</li>
<li>Optimized <a class="el" href="asm_2mos6502_2string_8h.html#a216d2a9dfabd49eb459363d672a4512f">memcpy()</a> for larger amounts of data</li>
<li>Fixed <a class="el" href="gb_8h.html#abb680388b5bcbf0c69526d7017ffe8d2">waitpad()</a></li>
<li>Fixed return result of "`set_tile x, y`" family functions</li>
<li>Fixed to not allow interrupts to fire durint crt0 initialization code</li>
</ul>
</li>
<li>MSXDOS<ul>
<li>Fixed <code>.VDP_COLORDATA2</code> assembly definition</li>
</ul>
</li>
<li>Game Boy<ul>
<li>Added HBlank copy routines: <a class="el" href="hblankcpy_8h.html#a6d0127b6bf7926f3329ae255b116ffb7">hblank_copy_vram()</a>, <a class="el" href="hblankcpy_8h.html#a76fcbe1a2a022d4cd36b473e24ba9abd">hblank_cpy_vram()</a>, <a class="el" href="hblankcpy_8h.html#a49bc3430f31b23fa03cd771ace74c8ba">hblank_copy()</a></li>
<li>Added <a class="el" href="gb_2hardware_8h.html#a9a23aa4755bbd3994d2b3b8dd77c5b50">SCF_START</a>, <a class="el" href="gb_2hardware_8h.html#a72d6af50641c36bd38ba5dfee229a032">SCF_SOURCE</a>, <a class="el" href="gb_2hardware_8h.html#a934eba7bd84d8082bb934a609686d6d6">SCF_SPEED</a> aliases for SIO (Serial/Link port) control register control constants</li>
<li>Added clamping and changed to new SDCC calling convention for <a class="el" href="msx_8h.html#adcd40a58f7c7d348d506cc400cd94739">set_bkg_tile_xy()</a>, <a class="el" href="msx_8h.html#a95d929d964d9988f4dc5a25ed399ae08">set_win_tile_xy()</a></li>
<li>Added <a class="el" href="sms_8h.html#a33caf10f6d1a7cbb6bd07b899c1a545f">S_BANK</a> tile attribute</li>
<li>Fixed 8-bit signed modulus</li>
</ul>
</li>
<li>MegaDuck<ul>
<li>Fixed ROM bank switching on hardware when trying to enable or switch SRAM banks</li>
</ul>
</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li>Added <a class="el" href="docs_toolchain.html#utility_romusage">romusage</a> utility for viewing free/used ROM and RAM in compiled programs</li>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>Changed <code>-debug</code> to add the following flags: <code>-Wa-l -Wl-u -Wl-w</code></li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a><ul>
<li>Added <code>-sprite_no_optimize</code>: sprite conversion will keep duplicate and empty sprite tiles</li>
<li>Added <code>-entity_tileset</code>: mark entity locations on maps during conversion with an entity tileset</li>
<li>Added <code>-rel_paths</code>: paths to tilesets are relative to the input file path</li>
<li>Changed <code>-keep_palette_order</code> to round up to at least one palette</li>
<li>Changed <code>-use_structs</code> + <code>-source_tileset</code> behavior<ul>
<li>Point tile data to external source tileset</li>
<li>Add <code>extra_tiles</code> struct member pointing to map tiles not found in source tileset (null if none found)</li>
</ul>
</li>
<li>Changed <code>-use_structs</code> to use designated initializers</li>
<li>Changed if using either <code>-bpp 1</code> or <code>-pack_mode 1bpp</code> then the other is auto-enabled</li>
<li>Fixed garbage in unused colors of palettes (set unused colors to black)</li>
<li>Fixed <code>-bin</code> mode not honoring <code>-tiles_only</code> and <code>-maps_only</code></li>
<li>Fixed segfault and wrong data size for <code>-pack_mode sgb</code> + <code>-bin</code></li>
<li>Fixed missing Palette ID in attributes for multi-palette SMS/GG backgrounds</li>
<li>Fixed not taking <code>-bpp</code> into account when converting metasprites and emitting <code>&lt;symbol&gt;_tile_pals[]</code></li>
<li>Fixed crash when filename for -o and -c not specified</li>
<li>Fixed some attributes missing for metasprite export</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#makebin">makebin</a><ul>
<li>Fixed crash when using <code>-yS</code> (<code>-Wm-yS</code> with lcc)</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#bankpack">bankpack</a><ul>
<li>Added <code>-banktype=</code> to allow forcing a bank type to CODE or LIT before packing starts</li>
<li>Added support for <code>XL4</code> (32 bit addresses) object file format (in addition to existing <code>XL3</code>)</li>
<li>Changed minimum bank for auto packing from <code>1</code> to <code>0</code> (required for the NES)</li>
</ul>
</li>
</ul>
</li>
<li>Examples<ul>
<li>Added HBlank copy example for GB/AP/Duck</li>
<li>Added Reading SNES joypads on NES example</li>
<li>Added Game Boy Printer example</li>
<li>Added Joypad testing example</li>
<li>Added Display System example to demonstrate <a class="el" href="gb_8h.html#a4093fb5f45f807fe8d4a45121f3fffc5">get_system()</a></li>
<li>Added Platformer example</li>
<li>Added <code>GBDK_DEBUG</code> Makefile environment var for turning on/off debug flags</li>
<li>Changed wav sample: play waveforms on the SMS/GG PSG</li>
<li>Changed Random Number example: only call <a class="el" href="rand_8h.html#a964538799843c0ba5bd01151ef7e2640">initrand()</a> once</li>
<li>Changed Large Map: support modified initial camera position</li>
<li>Changed all examples: use <a class="el" href="asm_2types_8h.html#aa8480aed89a168ec484727f5ac985cd0">BANKED</a> macro instead of <code>__banked</code><ul>
<li>Also change some to use <a class="el" href="sms_8h.html#ae042588f20bf5a2349c8ad8716245233">CURRENT_BANK</a> instead of <code>_current_bank</code></li>
</ul>
</li>
<li>Fixes for SMS/GG: Fonts, Large Map, gbdecompress</li>
<li>Fixed NES version of Text Scroller to have multiple splits as other platforms do</li>
<li>Fixed Simple Physics: joypad input caching was wrong</li>
<li>Fixed Banks Non-Intrinsic: mismatched SRAM banks for final calculation, improved naming</li>
<li>Removed Analogue Pocket examples that were just duplicates of Game Boy ones</li>
</ul>
</li>
<li>Docs:<ul>
<li>Fixed search where some exact matches didn't return a result</li>
<li>Various updates and improvements</li>
<li>Added more historical release notes</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md245"></a>
GBDK-2020 4.2.0</h2>
<p>2023/08</p><ul>
<li>Includes SDCC version ~4.3 with GBDK-2020 patches for Z80 and NES<ul>
<li><a href="https://github.com/gbdk-2020/gbdk-2020-sdcc/releases">Patched SDCC Builds</a> with support for Sega GG/SMS and the Nintendo NES are used. See the <a href="https://github.com/gbdk-2020/gbdk-2020-sdcc/tree/main/.github/workflows">github workflow</a> for details</li>
</ul>
</li>
<li>Known Issues<ul>
<li>SDCC may fail on Windows when <a class="el" href="docs_getting_started.html#windows_sdcc_non_c_drive_path_spaces">run from folder names with spaces on non-C drives</a>.</li>
</ul>
</li>
<li>Library<ul>
<li>Added <code>NORETURN</code> definition (for <code>_Noreturn</code>)</li>
<li>Added: <a class="el" href="gb_8h.html#a0bcf384938628c4ab52e63b2df8f78f8">set_bkg_attributes()</a>, <a class="el" href="gb_8h.html#a1cefe143b3861632897e0c989401bce7">set_bkg_submap_attributes()</a>, <a class="el" href="sms_8h.html#a4d5a69c2f61a3b7e8656548132a872d7">set_bkg_attribute_xy()</a></li>
<li>The following new functions replace old ones. The old functions will continue to work for now, but migration to new versions is strongly encouraged.<ul>
<li><a class="el" href="gb_8h.html#af57b77452ef377da18e4fbf0288013d1">vsync()</a>: replaces <a class="el" href="gb_8h.html#a815f8ecad32d14b786a8ed1168518773">wait_vbl_done()</a></li>
<li><a class="el" href="cgb_8h.html#a2a89f4110072dbe76805e7b07299788d">set_default_palette()</a>: replaces <a class="el" href="cgb_8h.html#a6b334e5e452d0650aded17199be1514a">cgb_compatibility()</a></li>
</ul>
</li>
<li>metasprites: added metasprite functions which can set base sprite property parameter (<code>__current_base_prop</code>) for GB/GBC and NES<ul>
<li><a class="el" href="gb_2metasprites_8h.html#a4de12dbe1868a2a408e8ef583ccc9df1">move_metasprite_flipy()</a>: replaces <a class="el" href="gb_2metasprites_8h.html#a27e3bb17d0458b60b1f0433f66301f46">move_metasprite_hflip()</a></li>
<li><a class="el" href="gb_2metasprites_8h.html#a061cc1e8214c86414dc1d5017b9c8be2">move_metasprite_flipx()</a>: replaces <a class="el" href="gb_2metasprites_8h.html#aa8ff2df0679ebb0b6e0a8f6d83127e1a">move_metasprite_vflip()</a></li>
<li><a class="el" href="gb_2metasprites_8h.html#a21a071eea8fb69b577cfcd86aad5bdac">move_metasprite_flipxy()</a>: replaces <a class="el" href="gb_2metasprites_8h.html#a32a61acd4a76d1de5814f7b94c8bc23f">move_metasprite_hvflip()</a></li>
<li><a class="el" href="gb_2metasprites_8h.html#a6a320e8632e35cba926e089b035146e1">move_metasprite_ex()</a>: (replaces <a class="el" href="gb_2metasprites_8h.html#a77475e913bf0a19df28bdbf9d1cf392b">move_metasprite()</a></li>
</ul>
</li>
<li>NES<ul>
<li>Added support for much of the GBDK API</li>
<li>Banking support (library and sdcc toolchain)</li>
<li>Added <a class="el" href="nes_8h.html#a0254d6e23d4202cb070b1fe54c6a7210">set_bkg_attributes_nes16x16()</a>, <a class="el" href="nes_8h.html#aadba8b700b97ec97dc9c488496619fd9">set_bkg_submap_attributes_nes16x16()</a>, <a class="el" href="nes_8h.html#a7b7c27e672467f08097f744f3530bbc7">set_bkg_attribute_xy_nes16x16()</a></li>
</ul>
</li>
<li>SMS/GG<ul>
<li>Swapped A and B buttons to match game boy buttons</li>
<li>X coordinate metasprite clipping on the screen edges</li>
</ul>
</li>
<li>Game Boy<ul>
<li>Minor crt0 optimizations</li>
<li>Faster <a class="el" href="gb_8h.html#a2dd9f335a197647264f01a713bd31a70">vmemcpy()</a>, <a class="el" href="gb_8h.html#a6148e40610bc542991df842c6b19e4c9">set_data()</a>, <a class="el" href="gb_8h.html#a77d34577e9f97ffaf8463c752115722b">get_data()</a></li>
<li>Fixed hide_sprites_range(39u, 40u); overflow shadow OAM</li>
<li>Increased <a class="el" href="sgb_8h.html#a84e1f2ab7dce1faabd3d271b6bf8df8c">sgb_transfer()</a> maximum packet length to 7 x 16 bytes</li>
<li>Convert gb_decompress routines to the new calling convention</li>
<li>Convert rle_decompress routines to the new calling convention</li>
<li>Removed legacy MBC register definitions <code>.MBC1_ROM_PAGE</code> and <code>.MBC_ROM_PAGE</code></li>
<li>Workaround for possible HALT bug in Crash Handler</li>
</ul>
</li>
<li>Refactored interrupts to use less space</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li>Added <a class="el" href="docs_toolchain.html#utility_png2hicolorgb">png2hicolorgb</a></li>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>Fixed <code>--sdccbindir</code></li>
<li>Removed the unused <code>-DINT_16_BITS</code> from the default SDCC compiler and preprocessor arguments</li>
<li>Improved improved Game Gear header compatibility (change header region code from 4 to 6)</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a><ul>
<li>Added <code>-o</code> as a more standard version of the <code>-c</code> argument</li>
<li>Added <code>-repair_index_pal</code>: Tries to repair tile palettes for indexed color pngs (such as when RGB paint programs mix up indexed colors if the same color exists in multiple palettes). Implies <code>-keep_palette_order</code></li>
<li>Added <code>-no_palettes</code>: Do not export palette data</li>
<li>Fixed support for indexed color pngs with less than 8 bits color depth</li>
<li>Fixed incorrect palettes when different colors have same luma value (use RGB values as less-significant bits)</li>
<li>Fixed <code>-keep_duplicate_tiles</code> not working with <code>-source_tileset</code></li>
<li>Changed to use cross-platform constants for metasprite properties (S_FLIPX, S_FLIPY and S_PAL)</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#makebin">makebin</a><ul>
<li>Warn if RAM banks specified and file size of ROM is less than the 64K required to enable them with in emulators</li>
</ul>
</li>
<li>Added sdld6808 (for NES)</li>
</ul>
</li>
<li>Examples<ul>
<li>Fixed mkdir broken in some compile.bat files (remove unsupported -p flag during bat file conversion)</li>
<li>Sound Test: Added MegaDuck support</li>
<li>Wav Playback: Improved support on AGB/AGS hardware</li>
<li>Metasprites: Added sub-palette switching for GBC and NES, software metasprite flipping for sms/gg</li>
<li>Large Map: Added color for supported platforms</li>
<li>LCD ISR Wobble: Improved interrupt flag settings</li>
<li>Added GB-Type example</li>
<li>Added Game Boy Color Hi-Color example using <a class="el" href="docs_toolchain.html#utility_png2hicolorgb">png2hicolorgb</a></li>
</ul>
</li>
<li>Docs:<ul>
<li>Improved search to do partial matches instead of matching start of string only</li>
<li>Added SDAS assembler manual (asmlnk_manual.txt)</li>
<li>Added section on <a class="el" href="docs_supported_consoles.html#nes_technical_details">NES support</a></li>
<li>Added <a class="el" href="docs_supported_consoles.html#using_cgb_features">Using Game Boy Color Features</a></li>
<li>Updated <a class="el" href="docs_supported_consoles.html#megaduck_sound_register_value_changes">MegaDuck hardware documentation</a></li>
<li>Added <a class="el" href="docs_coding_guidelines.html#banked_calling_convention">Banked Calling Convention</a></li>
<li>Added mention of <a class="el" href="sms_8h.html#a8b77608c87a9aef65a03531482b2163b">MAX_HARDWARE_SPRITES</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md246"></a>
GBDK-2020 4.1.1</h2>
<p>2022/11</p><ul>
<li>Includes SDCC version 13350 with GBDK-2020 patches for Z80</li>
<li>Library<ul>
<li>Fixed <a class="el" href="cgb_8h.html#a4a118ad3ee36468a3fa616977a64864e">RGB()</a> and <a class="el" href="cgb_8h.html#a7d2ed0f10b2b74123a544327bbfd7564">RGB8()</a> macros</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md247"></a>
GBDK-2020 4.1.0</h2>
<p>2022/10</p><ul>
<li>Includes SDCC version 13350 with GBDK-2020 patches for Z80</li>
<li>Known Issues<ul>
<li>The <code>compile.bat</code> batch files for Windows use the an invalid <code>-p</code> option for <code>mkdir</code></li>
</ul>
</li>
<li>Building GBDK<ul>
<li>The linux port of SDCC is custom built on Ubuntu 16.04 due to reduced GLIBC compatibility issues in more recent SDCC project builds.</li>
<li>Added Windows 32-Bit build</li>
</ul>
</li>
<li>Platforms<ul>
<li>SDCC has renamed the <code>gbz80</code> port to <code>sm83</code> see <a class="el" href="docs_faq.html#faq_gbz80_sm83_old_port_name_error">faq_gbz80_sm83_old_port_name_error</a></li>
<li>Added experimental support for MSXDOS (<code>msxdos</code>) and NES (<code>nes</code>). These platforms are not fully functional at this time. See <a class="el" href="docs_supported_consoles.html">Supported Consoles &amp; Cross Compiling</a></li>
</ul>
</li>
<li>Licensing<ul>
<li>Clarified licensing status with consent from GBDK original authors, added licensing folder to distribution</li>
</ul>
</li>
<li>Library<ul>
<li>SGB: Use longer wait between the SGB packet transfers</li>
<li>SMS/GG: less garbage on screen when clearing VRAM in the init code</li>
<li>SMS/GG: Added <a class="el" href="cgb_8h.html#a6b334e5e452d0650aded17199be1514a">cgb_compatibility()</a> to set default palette with the four shades of gray</li>
<li>Fixed: <a class="el" href="gb_8h.html#adcdec4034a14abc5be9bb88c29b947c9">get_sprite_data()</a>, <a class="el" href="gb_8h.html#a5c13238dfec416439d75b133a272e6df">get_bkg_data()</a> , <a class="el" href="gb_8h.html#a7ef32e7c1669aba48f235500a495baba">get_win_data()</a> when <a class="el" href="gb_2hardware_8h.html#a731588b96fb8cdbeb7e68c089373e6f8">LCDCF_BG8000</a> bit of <a class="el" href="gb_2hardware_8h.html#a6515fdfaa50eeb7e63faeea54f77cd6b">LCDC_REG</a> is set</li>
<li>Fixed ISR chain lengths. VBL: 4 user handlers, LCD: 3 user handlers, SIO/TIM/JOY: 4 user handlers</li>
<li>Added new constants for the Game Boy Color (CGB):<ul>
<li><a class="el" href="gb_2hardware_8h.html#ad21d032f4ab5d5cf21c4d455c4513046">VBK_BANK_0</a>, <a class="el" href="gb_2hardware_8h.html#afb1c02277ab645e83e2ee339e2f6a64f">VBK_BANK_1</a></li>
<li><a class="el" href="sms_2hardware_8h.html#a6b6b917fd4f396ba028bb18631165781">VBK_TILES</a>, <a class="el" href="sms_2hardware_8h.html#a418a105f4c7d4bf1cbc556eab72c27ca">VBK_ATTRIBUTES</a></li>
<li><a class="el" href="gb_2hardware_8h.html#a893093832dbc9cb2221ef08068fd3658">BKGF_PRI</a>, <a class="el" href="gb_2hardware_8h.html#ac4f649cbcf7dd8cefda526aee7b2e29a">BKGF_YFLIP</a>, <a class="el" href="gb_2hardware_8h.html#a2916f86ab672a027a8cca3e2ba96f15b">BKGF_XFLIP</a>, <a class="el" href="gb_2hardware_8h.html#a07da4325be4f00825b0df8f7b562c009">BKGF_BANK0</a>, <a class="el" href="gb_2hardware_8h.html#a5b751c3e980ea453002074eadb885697">BKGF_BANK1</a></li>
<li><a class="el" href="gb_2hardware_8h.html#a4a771645b1215477023c89c8ea7e939d">BKGF_CGB_PAL0</a>, <a class="el" href="gb_2hardware_8h.html#a55225c84026779ae4596ceb319e2f111">BKGF_CGB_PAL1</a>, <a class="el" href="gb_2hardware_8h.html#af3ccbb599ddbe72ce3e5e7f82552ceb1">BKGF_CGB_PAL2</a>, <a class="el" href="gb_2hardware_8h.html#a1ee798f12c60156325284722d9a1a15a">BKGF_CGB_PAL3</a>, <a class="el" href="gb_2hardware_8h.html#adb3a50ad5e3fc54bf332e4156c218e2b">BKGF_CGB_PAL4</a>, <a class="el" href="gb_2hardware_8h.html#a458910105b4cd6c2f84e8a658d1a5c86">BKGF_CGB_PAL5</a>, <a class="el" href="gb_2hardware_8h.html#a563317d0bc48caf19a0ffe15100ca7fd">BKGF_CGB_PAL6</a>, <a class="el" href="gb_2hardware_8h.html#a7966b3d048fb1f1e348cc17f81fd5b04">BKGF_CGB_PAL7</a></li>
<li><a class="el" href="sms_2hardware_8h.html#a6b6b917fd4f396ba028bb18631165781">VBK_TILES</a>, <a class="el" href="sms_2hardware_8h.html#a418a105f4c7d4bf1cbc556eab72c27ca">VBK_ATTRIBUTES</a></li>
</ul>
</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>Changed to Error out and warn when <code>gbz80</code> port is used instead of <code>sm83</code></li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a><ul>
<li>Added <code>-tiles_only</code>: Export tile data only</li>
<li>Added <code>-maps_only</code>: Export map tilemap only</li>
<li>Added <code>-metasprites_only</code>: Export metasprite descriptors only</li>
<li>Added <code>-source_tileset</code>: Use source tileset image with common tiles</li>
<li>Added <code>-keep_duplicate_tiles</code>: Do not remove duplicate tiles</li>
<li>Added <code>-bin</code>: Export to binary format (includes header files)</li>
<li>Added <code>-transposed</code>: Export transposed (column-by-column instead of row-by-row)</li>
<li>Added basic MSXDOS support<ul>
<li>Added 1bpp packing mode (BPP1)</li>
<li><code>-spr16x16msx</code></li>
</ul>
</li>
<li>Added basic NES support<ul>
<li><code>-use_nes_attributes</code></li>
<li><code>-use_nes_colors</code></li>
</ul>
</li>
<li>Changed to only export <code>_tile_pals[]</code> arrays when <code>-use-structs</code> is set (ZGB specific)</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_gbcompress">gbcompress</a><ul>
<li>Added <code>--bank=&lt;num&gt;</code> Add Bank Ref: 1 - 511 (default is none, with <code>--cout</code> only)</li>
<li>Fixed failure to flush data at end of compression (uncommitted bytes)</li>
<li>Fixed <code>Warning: File read size didn't match expected</code></li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>When <code>-autobank</code> is specified <code>lcc</code> will automatically add <code>-yoA</code> for <a class="el" href="docs_toolchain.html#makebin">makebin</a> if no <code>-yo*</code> entry is present</li>
<li>Fixed broken <code>-E</code> Preprocess only flag</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_makecom">makecom</a><ul>
<li>Added <code>makecom</code> for post-processing msxdos binaries</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#makebin">makebin</a><ul>
<li>Fixed (via sdcc) bug with <code>-yp</code> not always working correctly<ul>
<li><a href="https://sourceforge.net/p/sdcc/code/12975/">https://sourceforge.net/p/sdcc/code/12975/</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#bankpack">bankpack</a><ul>
<li>Added support for the Game Boy Camera MBC</li>
<li>Added <code>-reserve=&lt;bank&gt;:&lt;size&gt;</code> option to reserve space during autobank packing<ul>
<li>Workaround for libraries that contain objects in banks (such as gbt-player)</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#ihxcheck">ihxcheck</a><ul>
<li>Check and warn for bank overflows under specific conditions<ul>
<li>A multiple write to the same address must occur. The address where the overlap ends is used as BANK.</li>
<li>There must also be a write which spans multiple banks, the ending address of that must match BANK. The starting addresses is the OVERFLOW-FROM BANK.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Examples<ul>
<li>Changed Logo example to use new GBDK logo art from user "Digit"</li>
<li>Added example for APA image mode with more than 256 tiles</li>
<li>Added SGB Sound Effects example</li>
<li>Changed to new WAV sound example</li>
</ul>
</li>
<li>Docs<ul>
<li>Added improved <a class="el" href="docs_rombanking_mbcs.html#mbc_type_chart">MBC Type chart</a></li>
<li>Include SDCC manual in pdf format <br  />
</li>
<li>Various doc updates and improvements</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md248"></a>
GBDK-2020 4.0.6</h2>
<p>2022/02</p><ul>
<li>Includes SDCC version 12539 with GBDK-2020 patches for Z80</li>
<li>Building GBDK<ul>
<li>Changed to target older version of macOS (10.10) when building for better compatibility</li>
</ul>
</li>
<li>Platforms<ul>
<li>Added support for Mega Duck / Cougar Boy (<code>duck</code>). See <a class="el" href="docs_supported_consoles.html">Supported Consoles &amp; Cross Compiling</a></li>
</ul>
</li>
<li>Library<ul>
<li>Added <a class="el" href="asm_2mos6502_2string_8h.html#a89f352da4604926eb5a5dabae5ec09e9">memcmp()</a></li>
<li>Added <a class="el" href="gb_8h.html#a617176cc314371eeddcd8903584d62f0">add_low_priority_TIM()</a> function for timer interrupts which allow nesting for GB/CGB</li>
<li>Added <a class="el" href="gb_8h.html#a811c386cac0df2d260aacb5a43608be5">set_bkg_based_tiles()</a>, <a class="el" href="gb_8h.html#abc8bc5808620a9717263b8c9ec2237f0">set_bkg_based_submap()</a>, <a class="el" href="gb_8h.html#a739a212609ae60c9c56c095f96b4ea80">set_win_based_tiles()</a>, <a class="el" href="gb_8h.html#a1b8a1026983cb2b2c0bd46334b4692a0">set_win_based_submap()</a> for when a map's tiles don't start at VRAM index zero</li>
<li>Added <a class="el" href="time_8h.html#aa7387b2120ad01dff4b9ece4d2ea0c39">clock()</a> for SMS/GG</li>
<li>Added macro definitions for SDCC features:<ul>
<li><code>#define SFR __sfr</code></li>
<li><code>#define <a class="el" href="asm_2types_8h.html#a66d3e9555a86fa871932c5f60834c67e">AT(A)</a> __at(A)</code></li>
</ul>
</li>
<li>Added check for OAM overflow to metasprite calls for GB/CGB</li>
<li>Added constant definitions <a class="el" href="sms_2hardware_8h.html#a6777f1ed2475b5ba6aa60b9a16fa02d3">PSG_LATCH</a>, <a class="el" href="sms_2hardware_8h.html#ad8a903de6b38e08e1591fc5ef278381c">PSG_CH0</a>, <a class="el" href="sms_2hardware_8h.html#addc12c4ee03ea787b826e337f1acd317">PSG_CH1</a>, <a class="el" href="sms_2hardware_8h.html#aaeefb1ac1fb4d0d2324b8ee7f4953226">PSG_CH2</a>, <a class="el" href="sms_2hardware_8h.html#ac760259fb86ee72abb5922018ae0db42">PSG_CH3</a>, <a class="el" href="sms_2hardware_8h.html#a3d806ff027bffa67c4dfc5967f87c1d1">PSG_VOLUME</a> for SMS/GG</li>
<li>Renamed <code>bgb_emu.h</code> to <code>emu_debug.h</code> and BGB_* functions to EMU_*.<ul>
<li>Aliases for the BGB_* ones and a <code>bgb_emu.h</code> shim are present for backward compatibility</li>
</ul>
</li>
<li>Changed headers to wrap SDCC specific features (such as <code>NONBANKED</code>) with <code>#ifdef __SDCC</code></li>
<li>Changed <a class="el" href="rand_8h.html#ad080d802f20859660e0faf0199a8a674">rand()</a> and <a class="el" href="rand_8h.html#af294ca742107f138a7e6f3be376ca53d">arand()</a> to return <code>uint8_t</code> instead of <code>int8_t</code> (closer to the standard)</li>
<li>Fixed declaration for <a class="el" href="gb_2hardware_8h.html#a271367a0bf840e5422b3a7ed541776f8">PCM_SAMPLE</a> and definition for <a class="el" href="gb_2hardware_8h.html#a2fe41a6e0abb211cc00a8fca90543966">AUD3WAVE</a></li>
<li>Fixed definition of <code>size_t</code> to be <code>unsigned int</code> instead of <code>int</code></li>
<li>Fixed <a class="el" href="gb_8h.html#a2dd9f335a197647264f01a713bd31a70">vmemcpy()</a> and <a class="el" href="asm_2mos6502_2string_8h.html#a854ba725a4e429439ccf93b1f5ad7b3a">memmove()</a> for SMS/GG</li>
<li>Fixed random number generation for SMS/GG</li>
<li>Fixed letter <code>U</code> appearing as <code>K</code> for min font</li>
<li>Fixed define name in crash_handler.h</li>
<li>Exposed <a class="el" href="rand_8h.html#a7aab2f4a234108a5eae48e0d26380ae7">__rand_seed</a></li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a><ul>
<li>Added SMS/GG graphics format support</li>
<li>Added 4bpp and SGB borders</li>
<li>Added warning when image size is not an even multiple of tile size</li>
<li>Added <code>-tile_origin</code> offset option for when map tiles do not start at tile 0 in VRAM</li>
<li>Added <code>*_TILE_COUNT</code> definition to output</li>
<li>Fixed CGB <code>...s_map_attributes</code> type definition in output</li>
<li>Fixed values for <code>num_palettes</code> in output</li>
<li>Fixed incorrect <code>TILE_COUNT</code> value when not <code>-using_structs</code></li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>Changed <a class="el" href="docs_toolchain.html#makebin">makebin</a> flags to turn off Nintendo logo copy for GB/CGB (use version in crt instead)</li>
<li>Fixed lcc handling of makebin <code>-x*</code> arguments</li>
</ul>
</li>
</ul>
</li>
<li>Examples<ul>
<li>Added logo example (cross-platform)</li>
<li>Added <a class="el" href="isr_8h.html#a73769fed9338af86fdb7df35d7b82620">ISR_VECTOR</a> example of a raw ISR vector with no dispatcher for GB/CGB</li>
<li>Changed sgb_border example to use png2asset for graphics</li>
<li>Changed use of <a class="el" href="gb_8h.html#ae6bc65c789195b4c19ee8765b1a2aa28">set_interrupts()</a> in examples so it's outside critical sections (since it disables/enables interrupts)</li>
<li>Changed cross-platform auto-banks example to use .h header files</li>
<li>Changed SGB border example to also work with SGB on PAL SNES</li>
</ul>
</li>
<li>Docs<ul>
<li>Added new section: Migrating From Pre-GBDK-2020 Tutorials</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md249"></a>
GBDK-2020 4.0.5</h2>
<p>2021/09</p><ul>
<li>Includes SDCC version 12539 with GBDK-2020 patches for Z80</li>
<li>Known Issues<ul>
<li>SDCC: <code>z80instructionSize() failed to parse line node, assuming 999 bytes</code><ul>
<li>This is a known issue with the SDCC Peephole Optimizer parsing and can be ignored.</li>
</ul>
</li>
<li><code>-bo&lt;n&gt;</code> and <code>-ba&lt;n&gt;</code> are not supported by the Windows build of <a class="el" href="docs_toolchain.html#sdcc">sdcc</a></li>
<li>On macOS the cross platform <code>banks</code> example has problems parsing the filename based ROM and RAM bank assignments into <code>-bo&lt;n&gt;</code> and <code>-ba&lt;n&gt;</code></li>
</ul>
</li>
<li>Added support for new consoles. See <a class="el" href="docs_supported_consoles.html">Supported Consoles &amp; Cross Compiling</a><ul>
<li>Analogue Pocket (<code>ap</code>)</li>
<li>Sega Master System (<code>sms</code>) and Game Gear (<code>gg</code>)</li>
</ul>
</li>
<li>Library<ul>
<li>Fixed error when calling get_bkg_tile_xy: &lsquo;?ASlink-Warning-Undefined Global &rsquo;.set_tile_xy' referenced by module ` ?ASlink-Warning-Byte PCR relocation error for symbol .set_tile_xy</li>
<li>Variables in static storage are now initialized to zero per C standard (but remaining WRAM is not cleared)</li>
<li>Added many new register flag constants and names. For example:<ul>
<li><a class="el" href="gb_2hardware_8h.html#a8b576a1fe1473ac4aff8afecb28035cb">rLCDC</a> is a new alias for <a class="el" href="gb_2hardware_8h.html#a6515fdfaa50eeb7e63faeea54f77cd6b">LCDC_REG</a></li>
<li><a class="el" href="gb_2hardware_8h.html#a13a5f08b9aae68f8fa57a8aa7705b732">LCDCF_WINON</a>, <a class="el" href="gb_2hardware_8h.html#a582ece3b5f6cc49d47b2ad3e16d47374">LCDCF_WINOFF</a>, <a class="el" href="gb_2hardware_8h.html#ae1de721c95ddc8f29ba9b9deaee8d68c">LCDCF_B_WINON</a></li>
</ul>
</li>
<li>Added <a class="el" href="gb_8h.html#a42705001e2b9897f5167b67fb36c69dd">BANK()</a>, <a class="el" href="gb_8h.html#a086293f2afb4c7945460a4496b20aea3">BANKREF()</a>, <a class="el" href="gb_8h.html#a261bba55a07b802baf99346feadd9852">BANKREF_EXTERN()</a></li>
<li>Added <a class="el" href="incbin_8h.html#af34047ed60abd6453f819c2a5230cd2b">INCBIN()</a>, <a class="el" href="gb_8h.html#a42705001e2b9897f5167b67fb36c69dd">BANK()</a>, <a class="el" href="incbin_8h.html#aeacb5370285c0d4308d0fe5f29da8d15">INCBIN_SIZE()</a>, <a class="el" href="incbin_8h.html#a51ab79f8ee37368158b1887b65ef97ec">INCBIN_EXTERN()</a></li>
<li>Added generic <a class="el" href="gb_8h.html#af61262bbc05629f31020afce67e1b9ea">SWITCH_ROM()</a> and <a class="el" href="gb_8h.html#a121feb0c32d124562f52398aa9656e7b">SWITCH_RAM()</a></li>
<li>Added <a class="el" href="gbdk_2emu__debug_8h.html#a892ddea0cd396141c1ae05e384303cbf">BGB_printf()</a> and updated emulator debug output.</li>
<li>Added <a class="el" href="gb_8h.html#a68651e50243349b48164a8ad983dca4e">set_native_tile_data()</a>, <a class="el" href="gb_8h.html#a55f82ff980398dd97036fd936ebd727e">set_tile_map()</a>, <a class="el" href="sms_8h.html#adcb394299a1033616fc7d2faec8bd6ad">set_1bpp_colors</a>, <a class="el" href="sms_8h.html#a4d5f74eed0489ebfdc2410ee3f9f7f04">set_bkg_1bpp_data</a>, <a class="el" href="sms_8h.html#a2cc121fbeb5570248531b85a8f0b5b97">set_sprite_1bpp_data</a>, <a class="el" href="sms_8h.html#aa224c9bac27c7fd268e62bdf33338a84">set_2bpp_palette</a>, <a class="el" href="sms_8h.html#aa7ba76e4d44dbf19da351fd1ea8e3023">set_bkg_2bpp_data</a>, <a class="el" href="sms_8h.html#a10ee2919fcab7a5c482816ed718d1c4a">set_sprite_2bpp_data</a>, <a class="el" href="sms_8h.html#ab752b1bb0f58da2a6d52e9747c4b3dd8">set_tile_2bpp_data</a> (sms/gg only), <a class="el" href="sms_8h.html#a551fa0b4eb3f30b067a6367a60472095">set_bkg_4bpp_data</a> (sms/gg only), <a class="el" href="sms_8h.html#ad9f5644f83d1b513d83c14bf83a18ce6">set_sprite_4bpp_data</a> (sms/gg only)</li>
<li>Added RLE decompression support: <a class="el" href="rledecompress_8h.html#a37405d6a4fdb8c43031be8eae02c85a3">rle_init()</a>, <a class="el" href="rledecompress_8h.html#a02fe4c30c8bc890a80aa3c5d09853038">rle_decompress()</a>,</li>
<li>Changed <a class="el" href="stdlib_8h.html#aac2ea595a9ea8f5ebd883a0bc05eba5c">itoa()</a>, <a class="el" href="stdlib_8h.html#a38c070016cb06132360cfa5bacc2ed19">uitoa()</a>, <a class="el" href="stdlib_8h.html#a6374e62474a5a76c7ace9a59fb1cc829">ltoa()</a>, <a class="el" href="stdlib_8h.html#ac22b79fe0c1279eabc3daf57328008d2">ultoa()</a> to now require a radix value (base) argument to be passed. On the Game Boy and Analogue Pocket the parameter is required but not utilized.</li>
</ul>
</li>
<li>Examples<ul>
<li>Added cross-platform examples (build for multiple consoles: gb, ap, sms, gg)</li>
<li>Added sms, gg, pocket(ap) examples</li>
<li>Added incbin example</li>
<li>Added simple physics sub-pixel / fixed point math example</li>
<li>Added rle decompression example</li>
<li>Changed windows make.bat files to compile.bat</li>
<li>Bug fixes and updates for existing examples <br  />
</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a><ul>
<li><a class="el" href="docs_toolchain.html#utility_png2asset">png2asset</a> is the new name for the <code>png2mtspr</code> utility</li>
<li>Added collision rectangle width and height (<code>-pw</code>, <code>-ph</code>)</li>
<li>Added option to use the palette from the source png (<code>-keep_palette_order</code>)</li>
<li>Added option to disable tile flip (<code>-noflip</code>)</li>
<li>Added export as map: tileset + bg (<code>-map</code>)</li>
<li>Added option to use CGB BG Map attributes (<code>-use_map_attributes</code>)</li>
<li>Added option to group the exported info into structs (<code>-use_structs</code>)</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#lcc">lcc</a><ul>
<li>Use <code>-m</code> to select target port and platform: "-m[port]:[plat]" ports:<code>gbz80,z80</code> plats:<code>ap,gb,sms,gg</code></li>
<li>Changed default output format when not specified from <code>.ihx</code> to <code>.gb</code> (or other active rom extension)</li>
<li>Changed lcc to always use the linkerfile <code>-lkout=</code> option when calling bankpack</li>
<li>Fixed name generation crash when outfile lacks extension</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#bankpack">bankpack</a><ul>
<li>Added linkerfile input and output: <code>-lkin=&lt;file&gt;</code>, <code>-lkout=&lt;file&gt;</code></li>
<li>Added selector for platform specific behavior <code>plat=&lt;plat&gt;</code> (Default:gb, Avaialble:<code>gb,sms</code>). sms/gg targets prohibits packing <code>LIT_N</code> areas in the same banks as <code>CODE_N</code> areas</li>
<li>Added randomization for auto-banks (<code>-random</code>) for debugging and testing</li>
</ul>
</li>
<li><a class="el" href="docs_toolchain.html#utility_gbcompress">utility_gbcompress</a><ul>
<li>Added C source array format output (&ndash;cout) (optional variable name argument &ndash;varname=)</li>
<li>Added C source array format input (&ndash;cin) (experimental)</li>
<li>Added block style rle compression and decompression mode: <code>--alg=rle</code></li>
<li>Fixed comrpession errors when input size was larger than 64k</li>
</ul>
</li>
</ul>
</li>
<li>Docs<ul>
<li>Added <a class="el" href="docs_supported_consoles.html">Supported Consoles &amp; Cross Compiling</a> section</li>
<li>Various doc updates and improvements</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md250"></a>
GBDK-2020 4.0.4</h2>
<p>2021/06</p><ul>
<li>Library<ul>
<li>Support SDCC INITIALIZER area (SDCC ~12207+)</li>
<li>Added <a class="el" href="gb_8h.html#ae32250cfb4daaa1fff7250a0e3f0ad0f">get_vram_byte()</a> / <a class="el" href="gb_8h.html#a2e29fdca81c28c627c2591029722e71c">get_win_tile_xy()</a> / <a class="el" href="gb_8h.html#a55c6581dbe9300dc6df41730f090af51">get_bkg_tile_xy()</a></li>
<li>Added <a class="el" href="gb_8h.html#abe4846d4570b4880b0e54b9e503f4d30">set_tile_data()</a></li>
<li>Fixed SGB detection</li>
<li>Fixed broken <a class="el" href="gb_8h.html#af9830fb188433cb0305c2cefb8f8ab11">get_tiles()</a> / <a class="el" href="gb_8h.html#a6224b2e4b72c062a2bb2959b0aaf860a">set_tiles()</a></li>
<li>Fixed broken token handling in <a class="el" href="gb_2gbdecompress_8h.html#a7dc591cd36b8914ed8c1a5d3e9071feb">gb_decompress_sprite_data()</a> / <a class="el" href="gb_2gbdecompress_8h.html#a6817710d720988cd277261ce95de1597">gb_decompress_bkg_data()</a> / <a class="el" href="gb_2gbdecompress_8h.html#a986ffdd6668359bad530e606354ede38">gb_decompress_win_data()</a></li>
<li>Changed all headers to use standard <code>stdint.h</code> types (ex: <code>uint8_t</code> instead of <code>UINT8</code>/<code>UBYTE</code>)</li>
<li>Made sample.h, cgb.h and sgb.h independent from gb.h</li>
</ul>
</li>
<li>Examples<ul>
<li>Added project using a .lk linkerfile</li>
<li>Changed all examples to use standard stdint.h types</li>
<li>Moved banks_farptr and banks_new examples to "broken" due to SDCC changes</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li>png2mtspr<ul>
<li>Added option to change default value for sprite property/attributes in (allows CGB palette, BG/WIN priority, etc).</li>
<li>Improved: Turn off suppression of "blank" metasprite frames (composed of entirely transparent sprites)</li>
<li>Fixed endless loop for png files taller than 255 pixels</li>
</ul>
</li>
<li>bankpack<ul>
<li>Fixed -yt mbc specifier to also accept Decimal</li>
<li>Improved: bank ID can be used in same file it is declared. Requires SDCC 12238+ with <code>-n</code> option to defer symbol resolution to link time.</li>
</ul>
</li>
<li>gbcompress<ul>
<li>Added C source input (experimental) and output</li>
<li>Added size <code>#defines</code></li>
</ul>
</li>
<li>lcc<ul>
<li>Added <code>-no-libs</code> and <code>-no-crt</code> options</li>
<li>Added support for .lk linker files (useful when number of files on lcc command line exceeds max size on windows)</li>
<li>Added support for converting .ihx to .gb</li>
<li>Added rewrite .o files -&gt; .rel for linking when called with <code>-autobank</code> and <code>-Wb-ext=.rel</code></li>
<li>Workaround <a class="el" href="docs_toolchain.html#makebin">makebin</a> <code>-Wl-yp</code> formatting segfault</li>
</ul>
</li>
</ul>
</li>
<li>Docs<ul>
<li>Improved utility_png2mtspr documentation</li>
<li>Various doc updates and improvements</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md251"></a>
GBDK-2020 4.0.3</h2>
<p>2021/03</p><ul>
<li>Library<ul>
<li>Added <a class="el" href="gb_8h.html#a2a26d723b07d1a9893f57208a201df36">set_vram_byte()</a></li>
<li>Added <a class="el" href="msx_8h.html#adcd40a58f7c7d348d506cc400cd94739">set_bkg_tile_xy()</a> / <a class="el" href="msx_8h.html#a95d929d964d9988f4dc5a25ed399ae08">set_win_tile_xy()</a></li>
<li>Added <a class="el" href="gb_8h.html#a9005b80d3315f50f0fb0e1728e7ee60f">get_bkg_xy_addr()</a> / <a class="el" href="msx_8h.html#a6eaafdbe6cf1695d30724ce75acb9412">get_win_xy_addr()</a></li>
<li>Added <a class="el" href="gb_8h.html#adb21d1c7d533a7133bab36a845489780">set_bkg_submap()</a> / <a class="el" href="gb_8h.html#af80befa3cad9cae361c7cf4fffb3a8de">set_win_submap()</a></li>
<li>Added metasprite api support</li>
<li>Added gb_decompress support</li>
<li>Added <a class="el" href="stdlib_8h.html#a62b7798461bd461da64c5f9d35feddf7">calloc</a> / <a class="el" href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a> / <a class="el" href="stdlib_8h.html#a1a6b5e8d2f1c37e5b43e4345586075be">realloc</a> / <a class="el" href="stdlib_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">free</a> and generic <a class="el" href="asm_2z80_2string_8h.html#a854ba725a4e429439ccf93b1f5ad7b3a">memmove</a></li>
<li>Improved <a class="el" href="stdio_8h.html#a133c04c35a1c14c6f8d8078831705661">printf()</a>: ignore %0 padding and %1-9 width specifier instead of not printing, support upper case X</li>
<li>Fixed <a class="el" href="drawing_8h.html#afe0ad8959a2867c4b60829d065660f1b">line()</a>: handle drawing when x1 is less than x2</li>
</ul>
</li>
<li>Examples<ul>
<li>Added large_map: showing how to use <a class="el" href="gb_8h.html#adb21d1c7d533a7133bab36a845489780">set_bkg_submap()</a></li>
<li>Added scroller: showing use of <a class="el" href="gb_8h.html#a9005b80d3315f50f0fb0e1728e7ee60f">get_bkg_xy_addr()</a>, <a class="el" href="msx_8h.html#adcd40a58f7c7d348d506cc400cd94739">set_bkg_tile_xy()</a> and <a class="el" href="sms_8h.html#afe1bc7117a68cd0939c2d03baaa06b89">set_vram_byte</a></li>
<li>Added gbdecompress: de-compressing tile data into vram</li>
<li>Added metasprites: show creating a large sprite with the new metasprite api</li>
<li>Added template projects</li>
<li>Fixed build issue with banks_autobank example</li>
<li>Improved sgb_border</li>
</ul>
</li>
<li>Toolchain / Utilities<ul>
<li>Added <a class="el" href="docs_toolchain.html#utility_gbcompress">utility_gbcompress</a> utility</li>
<li>Added utility_png2mtspr metasprite utility</li>
</ul>
</li>
<li>Docs<ul>
<li>Added extensive documentation (some of which is imported and updated from the old gbdk docs)</li>
<li>Added PDF version of docs</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md252"></a>
GBDK-2020 4.0.2</h2>
<p>2021/01/17</p><ul>
<li>Includes SDCC snapshot build version 12016 (has a fix for duplicate debug symbols generated from inlined header functions which GBDK 4.0+ uses)</li>
<li>Updated documentation</li>
<li>Library was improved<ul>
<li>Linking with stdio.h does not require that much ROM now</li>
<li>Default font is changed to the smaller one (102 characters), that leaves space for user tiles</li>
<li>Fixed broken support for multiplying longs</li>
<li>memset/memcpy minor enhancements</li>
<li>safer copy-to-VRAM functions</li>
<li>loading of 1bit data fixed, also now it is possible to specify pixel color</li>
<li>Improved code generation for the GBDK Library with SDCC switch on by default: <code>--max-allocs-per-node 50000</code></li>
<li>fixed wrong parameter offsets in <a class="el" href="gb_8h.html#a97b9f2fc6ac7cae97656aca940d65d44">hiramcpy()</a> (broken ram_function example)</li>
<li>Multiple minor improvements</li>
</ul>
</li>
<li>New bankpack feature, allows automatic bank allocation for data and code, see banks_autobank example, feature is in beta state, use with care</li>
<li>Lcc improvements<ul>
<li>Fixed option to specify alternate base addresses for shadow_OAM, etc</li>
</ul>
</li>
<li>Examples: Added bgb debug example</li>
</ul>
<h2><a class="anchor" id="autotoc_md253"></a>
GBDK-2020 4.0.1</h2>
<p>2020/11/14</p><ul>
<li>Updated API documentation</li>
<li>IHX is checked for correctness before the makebin stage. That allows to warn about overwriting the same ROM addresses (SDCC toolchain does not check this anymore).</li>
<li>Library was improved<ul>
<li>set_*_tiles() now wrap maps around horizontal and vertical boundaries correctly</li>
<li>new fill_*_rect() functions to clear rectangle areas</li>
<li>runtime initialization code now does not initialize whole WRAM with zeros anymore, that allows BGB to raise exceptions when code tries to read WRAM that was not written before.</li>
<li>enhanced SGB support<ul>
<li><a class="el" href="gb_8h.html#ab7e35e1eff44ed78ad8f0015c6e85b4e">joypad_init()</a> / <a class="el" href="gb_8h.html#ab6634cc802b70972dc0ce0961ffc9693">joypad_ex()</a> support for multiple joypads</li>
<li>SGB border example</li>
</ul>
</li>
<li>_current_bank variable is updated when using bank switching macros</li>
<li>Reorganized examples: each example is in separate folder now, that simplifies understanding.</li>
<li>Lcc improvements<ul>
<li>Fix -S flag</li>
<li>Fix default stack location from 0xDEFF to 0xE000 (end of WRAM1)</li>
<li>Fix cleanup of .adb files with -Wf&ndash;debug flag</li>
<li>Fix output not working if target is -o some_filename.ihx</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md254"></a>
GBDK-2020 4.0</h2>
<p>2020/10/01</p><ul>
<li>GBDK now requires SDCC 4.0.3 or higher, that has fully working toolchain. Old link-gbz80 linker is not used anymore, sdldgb and makebin are used to link objects and produce binary roms; maccer tool is no longer needed either<ul>
<li>SDCC 4.0.3 has much better code generator which produces smaller and faster code. Code is twice faster</li>
<li>SOURCE LEVEL DEBUGGING is possible now! Native toolchain produces *.CDB files that contain detailed debug info. Look for EMULICIOUS extension for vs.code. It supports breakpoints, watches, inspection of local variables, and more!</li>
<li>SDCC 4.0.4 has fixed RGBDS support; library is not updated to support that in full yet, but it is possible to assemble and link code emitted by SDCC with RGDBS</li>
<li>New banked trampolines are used, they are faster and smaller</li>
<li>New (old) initialization for non-constant arrays do NOT require 5 times larger rom space than initialized array itself, SDCC even tries to compress the data</li>
</ul>
</li>
<li>Library was improved<ul>
<li>itoa/ltoa functions were rewritten, div/mod is not required now which is about 10 times faster</li>
<li>sprite functions are inline now, which is faster up to 12 times and produces the same or smaller code; .OAM symbol is renamed into _shadow_OAM that allows accessing shadow OAM directly from C code</li>
<li>interrupt handling was revised, it is now possible to make dedicated ISR's, that is important for time-sensitive handlers such as HBlank.</li>
<li>printf/sprintf were rewritten and splitted, print functions are twice faster now and also requre less rom space if you use <a class="el" href="stdio_8h.html#a440c82287022737c4f2866786ba8a154">sprintf()</a> only, say, in bgb_emu.h</li>
<li>crash_handler.h - crash handler that allows to detect problems with ROMs after they are being released (adapted handler, originally written by ISSOtm)</li>
<li>improved and fixed string.h</li>
<li>many other improvements and fixes - thanks to all contributors!</li>
</ul>
</li>
<li>Revised examples</li>
<li>Improved linux support</li>
<li>Lcc has been updated<ul>
<li>it works with the latest version of sdcc</li>
<li>quoted paths with spaces are working now</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md255"></a>
GBDK-2020 3.2</h2>
<p>2020/06/05</p><ul>
<li>Fixed OAM initialization that was causing a bad access to VRAM</li>
<li>Interrupt handlers now wait for lcd controller mode 0 or 1 by default to prevent access to inaccessible VRAM in several functions (like set_bkg_tiles)</li>
<li>Several optimizations here and there</li>
</ul>
<h2><a class="anchor" id="autotoc_md256"></a>
GBDK-2020 3.1.1</h2>
<p>2020/05/17</p><ul>
<li>Fixed issues with libgcc_s_dw2-1.dll</li>
</ul>
<h2><a class="anchor" id="autotoc_md257"></a>
GBDK-2020 3.1</h2>
<p>2020/05/16</p><ul>
<li>Banked functions are working! The patcher is fully integrated in link-gbz80, no extra tools are needed. It is based on Toxa's work<ul>
<li>Check this post for more info</li>
<li>Check the examples/gb/banked code for basic usage</li>
</ul>
</li>
<li>Behavior formerly enabled by USE_SFR_FOR_REG is on by default now (no need to specify it, it isn't a tested <code>#ifdef</code> anymore). check here why: <a href="https://gbdev.gg8.se/forums/viewtopic.php?id=697">https://gbdev.gg8.se/forums/viewtopic.php?id=697</a></li>
<li>Fixed examples that were not compiling in the previous version and some improvements in a few of them. Removed all warnings caused by changing to the new SDCC</li>
<li>Fixed bug in lcc that was causing some files in the temp folder not being deleted</li>
<li>Removed as-gbz80 (the lib is now compiled with sdasgb thanks to this workaround) <a href="https://github.com/gbdk-2020/gbdk-2020/commit/d2caafa4a66eb08998a14b258cb66af041a0e5c8">https://github.com/gbdk-2020/gbdk-2020/commit/d2caafa4a66eb08998a14b258cb66af041a0e5c8</a></li>
<li>Profile support with bgb emulator<ul>
<li>Basic support including &lt;gb/bgb_emu.h&gt; and using the macros BGB_PROFILE_BEGIN and BGB_PROFILE_END. More info in this post <a href="https://gbdev.gg8.se/forums/viewtopic.php?id=703">https://gbdev.gg8.se/forums/viewtopic.php?id=703</a></li>
<li>For full profiling check this repo and this post <a href="https://github.com/untoxa/bgb_profiling_toolkit/blob/master/readme.md">https://github.com/untoxa/bgb_profiling_toolkit/blob/master/readme.md</a> <a href="https://gbdev.gg8.se/forums/viewtopic.php?id=710">https://gbdev.gg8.se/forums/viewtopic.php?id=710</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md258"></a>
GBDK-2020 3.0.1</h2>
<p>2020/04/12</p><ul>
<li>Updated SDCC to v.4.0</li>
<li>Updated LCC to work with the new compiler</li>
</ul>
<h2><a class="anchor" id="autotoc_md259"></a>
GBDK-2020 3.0</h2>
<p>2020/04/12</p><ul>
<li>Initial GBDK-2020 release Updated SDCC to v4.0 The new linker is not working so the old version is still there There is an issue with sdagb compiling drawing.s (the JP in line 32 after ".org .MODE_TABLE+4*.G_MODE" it's writing more than 4 bytes invading some addresses required by input.s:41) Because of this, all .s files in libc have been assembled with the old as-gbz80 and that's why it is still included</li>
</ul>
<h1><a class="anchor" id="autotoc_md260"></a>
Historical GBDK Release Notes</h1>
<h2><a class="anchor" id="autotoc_md261"></a>
GBDK 2.96</h2>
<p>17 April, 2000 Many changes.</p><ul>
<li>Code generated is now much more reliable and passes all of sdcc's regression suite.</li>
<li>Added support for large sets of local variables (&gt;127 bytes).</li>
<li>Added full 32 bit long support.</li>
<li>Still no floating pt support.</li>
</ul>
<h2><a class="anchor" id="autotoc_md262"></a>
GBDK 2.95-3</h2>
<p>19th August, 2000</p>
<ul>
<li>Stopped lcc with sdcc from leaking .cdb files all across /tmp.</li>
<li>Optimised &lt; and &gt; for 16 bit varibles.</li>
<li>Added a new lexer to sdcc. Compiling files with large initalised arrays takes 31% of the time (well, at least samptest.c does :)</li>
</ul>
<p>This is an experimental release for those who feel keen. The main change is a new lexer (the first part in the compilation process which recognises words and symbols like '!=' and 'char' and turns them into a token number) which speeds up compilation of large initialised arrays like tile data by a factor of three. Please report any bugs that show up - this is a big change.</p>
<p>I have also included a 'minimal' release for win32 users which omits the documentation, library sources, and examples. If this is useful I will keep doing it.</p>
<h2><a class="anchor" id="autotoc_md263"></a>
GBDK 2.95-2</h2>
<p>5th August, 2000 Just a small update. From the README:</p>
<ul>
<li>Added model switching support &ndash;model-medium uses near (16 bit) pointers for data, and banked calls for anything not declared as 'nonbanked' &ndash;model-small uses near (16 bit) pointers for data and calls. Nothing uses banked calls. 'nonbanked' functions are still placed in HOME. Libraries are under lib/medium and lib/small.</li>
<li>Added the gbdk version to 'sdcc &ndash;version'</li>
<li>Changed the ways globals are exported, reducing the amount of extra junk linked in.</li>
<li>Turned on the optimisations in flex. Large constant arrays like tile data should compile a bit faster.</li>
</ul>
<h2><a class="anchor" id="autotoc_md264"></a>
GBDK 2.95</h2>
<p>22nd July, 2000</p><ul>
<li>Fixed 'a &lt;&lt; c' for c = [9..15]</li>
<li>no$gmb doesn't support labels of &gt; 32 chars. The linker now trims all labels to 31 chars long.</li>
<li>Fixed wait_vbl for the case where you miss a vbl</li>
<li>Fixed + and - for any type where sizeof == 2 and one of the terms was on the stack. This includes pointers and ints. Fixes the text output bug in the examples. Should be faster now as well. Note that + and - for longs is still broken.</li>
<li>Fixed the missing */ in gb.h</li>
<li>Added basic far function support. Currently only works for isas and rgbasm. See examples/gb/far/*</li>
<li>bc is now only pushed if the function uses it. i.e. something like: int silly(int i) { return i; } <br  />
 will not have the push bc; pop bc around it.</li>
<li>Better rgbasm support. Basically: o Use "sdcc -mgbz80 --asm=rgbds file.c" for each file.c o Use "sdcc -mgbz80 --asm=rgbds crt0.o gbz80.lib gb.lib file1.o file2.o..."</li>
</ul>
<p>to link everything together. The .lib files are generated using astorgb.pl and sdcc to turn the gbdk libraries into something rgbds compatible. The libraries are <em>not</em> fully tested. Trust nothing. But give it a go :)</p><ul>
<li>Ran a spell checker across the README and ChangeLog</li>
</ul>
<p>This is a recommended upgrade. Some of the big features are:</p>
<p>Decent rgbds support. All the libraries and most of the examples can now compile with rgbds as the assembler. Banked function support. It is now easier to break the 32k barrier from within C. Functions can live in and be called transparently from any bank. Only works with rgbds Fixed some decent bugs with RSH, LSH, and a nasty bug with + and - for int's and pointers. Various optimisations in the code generator.</p>
<p>7th July, 2000 Information on float and long support. Someone asked about the state of float/long support recently. Heres my reply:</p>
<p>long support is partly there, as is float support. The compiler will correctly recognise the long and float keywords, and will generate the code for most basic ops (+, -, &amp;, | etc) for longs correctly and will generate the function calls for floats and hard long operations (*, /, %) correctly. However it wont generate float constants in the correct format, nor will it 'return' a long or float - gbdk doesn't yet support returning types of 4 bytes. Unfortunately its not going to make it into 2.95 as there's too much else to do, but I should be able to complete long support for 2.96</p>
<h2><a class="anchor" id="autotoc_md265"></a>
GBDK 2.94</h2>
<p>7th May, 2000 Many fixes - see the README for more.</p>
<p>7th May - Library documentation up. A good size part of the libraries that go with gbdk have been documented - follow the HTML link above to have a look. Thanks to quang for a good chunk of the gb.h documentation. Please report any errors :)</p><ul>
<li>Fixed #define BLAH 7 // Unterminated ' error in sdcpp<ul>
<li>Fixed SCY_REG += 2, SCY_REG -= 5 (add and subtract in indirect space) as they were both quite broken.</li>
<li>externs and static's now work as expected.</li>
<li>You can now specify which bank code should be put into using a #pragma e.g: #pragma bank=HOME Under rgbds and asxxxx putting code in the HOME bank will force the code into bank 0 - useful for library functions. The most recent #pragma bank= will be the one used for the whole file.</li>
<li>Fixed an interesting bug in the caching of lit addresses</li>
<li>Added support for accessing high registers directly using the 'sfr' directive. See libc/gb/sfr.s and gb/hardware.h for an example. It should be possible with a bit of work to make high ram directly usable by the compiler; at the moment it is experimental. You can test sfr's by enabling USE_SFR_FOR_REG=1</li>
<li>Added remove_VBL etc functions.</li>
<li>Documented the libs - see the gbdk-doc tarball distributed seperatly.</li>
<li>Two dimensional arrays seem to be broken.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md266"></a>
GBDK 2.93</h2>
<p>6th April, 2000 From the README</p>
<ul>
<li>Added multi-bank support into the compiler - The old -Wf-boxx and -Wf-baxx options now work</li>
<li>Has preliminary support for generating rgbds and ISAS compatible assembler. Try -W&ndash;asm=rgbds or -W&ndash;asm=isas. The ISAS code is untested as I dont have access to the real assembler.</li>
<li>RSH is fixed</li>
<li>AND is fixed</li>
<li>The missing parts of 2.1.0's libs are there. Note: They are untested.</li>
<li>The dscan demo now fully works (with a hack :)</li>
<li>There is a bug with cached computed values which are later used as pointers. When the value is first used as a BYTE arg, then later as a pointer the pointer fails as the high byte was never computed and is now missing. A temporary fix is to declare something appropriate as 'volatile' to stop the value being cached. See dscan.c/bombs() for an example.</li>
</ul>
<h2><a class="anchor" id="autotoc_md267"></a>
GBDK 2.92-2 for win32</h2>
<p>26th March, 2000 This is a maintenance release for win32 which fixes some of the niggly install problems, especially:</p><ul>
<li>win32 only. Takes care of some of the install bugs, including:<ul>
<li>Now auto detects where it is installed. This can be overridden using set GBDKDIR=...</li>
<li>Problems with the installer (now uses WinZip)</li>
<li>Problems with the temp directory Now scans TMP, TEMP, TMPDIR and finally c: tmp</li>
<li>cygwin1.dll and 'make' are no longer required gbdk is now built using mingw32 which is win32 native make.bat is automagically generated from the Makefile</li>
<li>I've reverted to using WORD for signed 16 bit etc. GBDK_2_COMPAT is no longer required.</li>
</ul>
</li>
</ul>
<p>WORDS are now back to signed. GBDK_2_COMPAT is no longer needed. Temporary files are created in TMP, TEMP, or TMPDIR instead of c: tmp The installer is no more as it's not needed. There is a WinZip wrapped version for those with the extra bandwidth :). gbdk autodetects where it is installed - no more environment variables. cygwin1.dll and make are no longer required - gbdk is now compiled with mingw32.</p>
<p>See the ChangeLog section in the README for more information.</p>
<p>21st March, 2000 Problems with the installer. It seems that the demo of InstallVISE has an unreasonably short time limit. I had planed to use the demo until the license key came through, but there's no sign of the key yet and the 3 day evaluation is up. If anyone knows of a free Windows installer with the ability to modify environment variables, please contact me. I hear that temporarily setting you clock back to the 15th works...</p>
<p>18th March, 2000 libc5 version available / "Error creating temp file" Thanks to Rodrigo Couto there is now a Linux/libc5 version of gbdk3-2.92 available - follow the download link above. At least it will be there when the main sourceforge site comes back up... Also some people have reported a bug where the compiler reports '*** Error creating temp file'. Try typing "mkdir c: tmp" from a DOS prompt and see if that helps.</p>
<h2><a class="anchor" id="autotoc_md268"></a>
GBDK 2.92</h2>
<p>8th March, 2000 Better than 2.91 :). Can now be installed anywhere. All the demos work. See the README for more.</p><ul>
<li>All the examples now work (with a little bit of patching :)<ul>
<li>Fixed problem with registers being cached instead of being marked volatile.</li>
<li>More register packing - should be a bit faster.</li>
<li>You can now install somewhere except c: gbdk | /usr/lib/gbdk</li>
<li>Arrays initialised with constant addresses a'la galaxy.c now work.</li>
<li>Fixed minor bug with 104$: labels in as.</li>
<li>Up to 167d/s...</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md269"></a>
GBDK 2.91</h2>
<p>27th Feb, 2000 Better than 2.90 and includes Linux, win32 and a source tar ball. Some notes:</p>
<p>Read the README first Linux users need libgc-4 or above. Debian users try apt-get install libgc5. All the types have changed. Again, please read the README first. I prefer release early, release often. The idea is to get the bugs out there so that they can be squashed quickly. I've split up the libs so that they can be used on other platforms and so that the libs can be updated without updating the compiler. One side effect is that gb specific files have been shifted into their own directory i.e. gb.h is now gb/gb.h.</p>
<p>23rd Feb, 2000 First release of gbdk/sdcc. This is an early release - the only binary is for Linux and the source is only available through cvs. If your interested in the source, have a look at the cvs repository gbdk-support first, which will download all the rest of the code. Alternatively, look at gbdk-support and gbdk-lib at cvs.gbdk.sourceforge.net and sdcc at cvs.sdcc.sourceforge.net. I will be working on binaries for Win32 and a source tar ball soon. Please report any bugs through the bugs link above.</p>
<p>31st Jan, 2000 Added Dermot's far pointer spec. It's mainly here for comment. If sdcc is ported to the Gameboy then I will be looking for some way to do far calls.</p>
<p>8th Jan, 2000 Moved over to sourceforge.net. Thanks must go to David Pfeffer for gbdk's previous resting place, www.gbdev.org. The transition is not complete, but cvs and web have been shifted. Note that the cvs download instructions are stale - you should now look to cvs.gbdk.sourceforge.net. I am currently working on porting sdcc over to the Z80. David Nathan is looking at porting it to the GB.</p>
<p>6th Jan, 2000 Icehawk wrote "I did write some rumble pack routines. Just make sure to remind people to add -Wl-yt0x1C or -Wl-yt0x1D or -Wl-yt0x1E depending on sram and battery usage. Find the routines on my site (as usual). =)"</p>
<p>18th Oct, 1999 Bug tracking / FAQ up. Try the link on the left to report any bugs with GBDK. It's also the first place to look if your having problems.</p>
<h2><a class="anchor" id="autotoc_md270"></a>
GBDK 2.1.5</h2>
<p>17th Oct, 1999</p>
<p>The compiler is the same, but some of the libraries have been improved. <a class="el" href="asm_2mos6502_2string_8h.html#ace6ee45c30e71865e6eb635200379db9">memset()</a> and <a class="el" href="asm_2mos6502_2string_8h.html#a216d2a9dfabd49eb459363d672a4512f">memcpy()</a> are much faster, <a class="el" href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc()</a> is fixed, and a high speed fixed block alternative <a class="el" href="stdlib_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc()</a> was added.</p>
<h2><a class="anchor" id="autotoc_md271"></a>
GBDK 2.0b11 (DOS binary only) - 24 November 1997</h2>
<ul>
<li>Fixed another bug in code generation, that could happen when performing logical operations on 1-byte variables.</li>
</ul>
<h2><a class="anchor" id="autotoc_md272"></a>
GBDK 2.0b10 (DOS binary only) - 6 November 1997</h2>
<ul>
<li>Fixed a nasty bug in code generation, that could happen when performing arithmetic operations on 1-byte variables.</li>
<li>Changed the name of same files of the gb-dtmf example so that it compiles on DOS.</li>
</ul>
<h2><a class="anchor" id="autotoc_md273"></a>
GBDK 2.0b9 (DOS binary only)</h2>
<ul>
<li>Several bug fixes in the compiler and in the libraries.</li>
</ul>
<h2><a class="anchor" id="autotoc_md274"></a>
GBDK 2.0b8 (DOS binary only)</h2>
<ul>
<li>Limited all file names to 8 characters to solve problems on DOS.</li>
<li>Added communication routines that enable to send data through the link port of the GameBoy. Unfortunately, these routines do not always work; so use them with care until the next GBDK release.</li>
<li>Added the comm.c example which illustrates how to use communication routines.</li>
<li>It is possible to specify the name of the program (to be written in the image header) at link time using the -Wl-yn="XXX" flag (where X is the name of the program, which can contain up to 16 characters in quotes, including spaces; on Unix, depending on your shell, you must add backslashes before quotes and spaces like in -Wl-yn="My\ Game").</li>
<li>Several bug fixes in the compiler.</li>
</ul>
<h2><a class="anchor" id="autotoc_md275"></a>
GBDK 2.0b7 (DOS binary only)</h2>
<ul>
<li>GBDK now uses a pre-release of lcc 4.1 (DOS binary only), that fixes a couple of problems in code generation.</li>
<li>A couple of important points have been documented in the GBDK Programming Guidelines and Known Problems sections.</li>
<li>Several improvements and optimizations to the code generator.</li>
</ul>
<h2><a class="anchor" id="autotoc_md276"></a>
GBDK 2.0b6</h2>
<ul>
<li>Added a peephole optimizer (with few rules at the moment).</li>
<li>Changed the name of the hardware registers to match the "official" names.</li>
<li>Added support for copying complete functions to RAM or HIRAM (<a class="el" href="asm_2mos6502_2string_8h.html#a216d2a9dfabd49eb459363d672a4512f">memcpy()</a> and <a class="el" href="gb_8h.html#a97b9f2fc6ac7cae97656aca940d65d44">hiramcpy()</a> functions). The compiler now automatically generates two symbol for the start and the end of each function, named start_X and end_X (where X is the name of the function). This enables to calculate the length of a function when copying it to RAM.</li>
<li>Added the ram_fn.c example which illustrates how to copy functions to RAM and HIRAM.</li>
<li>Added support for installing IRQ handlers.</li>
<li>Added the irq.c example which illustrates how to install IRQ handlers.</li>
<li>Added RAM banks support (switch_ram_bank() function). The switch_bank() function has been renamed to switch_rom_bank(). The banks.c example has been updated. The flags for generating multiple bank images have been modified.</li>
<li>It is possible to set the sprite ram location at link time using the -Wl-g.OAM=# flag (where # is the address of the sprite ram). The sprite ram address must begin at an address multiple of 0x100, and is 0xA0 bytes long.</li>
</ul>
<h2><a class="anchor" id="autotoc_md277"></a>
GBDK 2.0b5</h2>
<ul>
<li>New documentation (not finished yet).</li>
<li>Fixed a bug that could generate wrong code in switch statements.</li>
<li>Fixed a bug in int comparison.</li>
<li>Added a DTMF program written by Osamu Ohashi.</li>
<li>Added a game (Deep Scan) written by a friend of Osamu.</li>
<li>Modified the <a class="el" href="gb_8h.html#a79b9feff94d525e0237be22dcefd5850">delay()</a> function so that it takes a long parameter. It can be used to wait between 1 and 65536 milliseconds (0 = 65536). The pause() function has been removed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md278"></a>
GBDK 2.0b4</h2>
<ul>
<li>Fixed a bug that could generate wrong code when using hexadecimal constants.</li>
<li>A new example (galaxy.c) has been added. It is the C version of the space.s example. sprite.c has been removed.</li>
<li>Most of the libraries have been split into small modules for reducing final code size.</li>
</ul>
<h2><a class="anchor" id="autotoc_md279"></a>
GBDK 2.0b3</h2>
<ul>
<li>GBDK can generate multiple-banks images, i.e. images greater than 32kB (see the banks example).</li>
<li>It is possible to set the stack pointer at link time using the -Wl-g.STACK=# flag (where # is the address of the stack pointer). Several functions (e.g. show_bkg()) have been changed into macros (e.g. SHOW_BKG). The <a class="el" href="gb_8h.html#a79b9feff94d525e0237be22dcefd5850">delay()</a> function waits exactly 1 millisecond, and the pause() waits 256 milliseconds. Linking with the standard libraries is no more required. The lib/gb.lib (lib\gb.lib on DOS) text file contains a list of modules in which to look for undefined symbols. The linker will parse this file, and link your code with the required modules only. The stdio library has been split in several object files, and only necessary modules will be added to your code, thus reducing its size. The GBDK distribution can be located anywhere in your system if you use the -Wo-lccdir=GBDK-DIR flag when invoking lcc. Bug fixes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md280"></a>
GBDK 2.0b2</h2>
<ul>
<li>Lots of bug fixes.</li>
<li>GBDK has to be in the <code>\GBDK-2.0</code> directory on DOS machines.</li>
</ul>
<h2><a class="anchor" id="autotoc_md281"></a>
GBDK 2.0b1</h2>
<ul>
<li>The code generator has been completely rewritten with the new version of lcc. It produces much smaller and more efficient code. The size of the code is generally between 20 and 50% smaller. A number of small optimizations are still to be done.</li>
<li>The size of basic types has been changed:<ul>
<li>An int is 8 bits.</li>
<li>A long is 16 bits.</li>
</ul>
</li>
<li>This change was required for the code generator to produce better code, because the Z80 is actually an 8-bit processor.</li>
<li>The linker generates the complement checksum correctly now.</li>
<li>The libraries and example programs have been modified for the new code generator.</li>
</ul>
<h2><a class="anchor" id="autotoc_md282"></a>
GBDK 1.1</h2>
<ul>
<li>Removed Xloadimage from the GBDK distribution. It is now available as a separate archive.</li>
<li>A compiled DOS version is now available (cross-compiled on my Sun Workstation!).</li>
<li>The libraries and the example programs have been improved.</li>
<li>The make script has been improved. Compiling on UNIX should be easier.</li>
<li>Many bugfixes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md283"></a>
GBDK 1.0-1 1996</h2>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
